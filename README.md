# TPC-H Query 5 Implementation in C++ (Multithreaded)

This project is a multithreaded C++ implementation of **TPC-H Query 5: "Local Supplier Volume"**. It uses raw `.tbl` data files generated by the TPC-H `dbgen` tool and performs fully in-memory processing without any database engine.

---

## ğŸ“Œ Project Features

* ğŸ”„ **Multithreaded**: Efficient parallel processing of orders.
* ğŸ“‚ **Fully In-Memory**: No DBMS required.
* ğŸ’» **CLI Interface**: Easily control inputs such as region, date range, and thread count.
* ğŸ“Š **Sorted Output**: Returns revenue per nation, sorted in descending order.
* ğŸ—ƒï¸ **Raw TPC-H `.tbl` File Support**.

---

## ğŸ“ Folder Structure

```
project_tpch/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ schema_types.h         # Struct definitions for all tables
â”‚   â”œâ”€â”€ data_loader.h          # Function declarations for loading tables
â”‚   â””â”€â”€ cliconfig_parser.h     # CLI argument parser header
â”‚
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ data_loader.cpp        # Loads data from .tbl files
â”‚   â”œâ”€â”€ cliconfig_parser.cpp   # CLI argument parsing logic
â”‚   â””â”€â”€ index.cpp              # Main logic (query processing, threading, output)
â”‚
â”œâ”€â”€ tbl_data/                  # Contains .tbl files (from dbgen)
â”œâ”€â”€ result.txt                 # Output result file
â””â”€â”€ README.md                  # Project documentation
```

---

## âš™ï¸ Requirements

* C++17 or later
* `make` or any modern C++ build system
* `.tbl` data files generated using the [TPC-H dbgen tool](https://www.tpc.org/tpc_documents_current_versions/pdf/tpc-h_v3.0.1.pdf)

---

## ğŸš€ Build & Run Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/project_tpch.git
cd project_tpch
```

### 2. Generate `.tbl` Files (Using `dbgen`)

If you havenâ€™t already, generate `.tbl` files using TPC-H's `dbgen` and place them in `tbl_data/`.

```bash
mkdir tbl_data
# Place files like nation.tbl, region.tbl, customer.tbl, etc. here
```

### 3. Compile the Project

You can use `g++` or a `Makefile`. Example:

```bash
g++ -std=c++17 main/index.cpp main/data_loader.cpp main/cliconfig_parser.cpp -o tpch_query
```

### 4. Run the Program

```bash
./tpch_query \
  --data ./tbl_data/ \
  --output result.txt \
  --region EUROPE \
  --start 1995-01-01 \
  --end 1996-01-01 \
  --threads 4
```

### Example CLI Flags

* `--data` : Path to folder containing `.tbl` files
* `--output` : Output file path
* `--region` : Name of region to filter (e.g., `EUROPE`)
* `--start` / `--end` : Order date range (inclusive start, exclusive end)
* `--threads` : Number of threads to use

---

## ğŸ“„ Output Format

The result (written to `result.txt`) lists nations and their corresponding revenue in descending order:

```
Final Revenue by Nations:
GERMANY: 17489230.12
FRANCE: 16344123.87
...
```

---

## ğŸ“š References

* [TPC-H Benchmark Specification](https://www.tpc.org/tpc_documents_current_versions/pdf/tpc-h_v3.0.1.pdf)
* Query 5: *Local Supplier Volume*

---

## ğŸ›  Future Improvements

* Add support for other TPC-H queries
* Include benchmark graphs for different thread counts
* JSON/CSV output option



